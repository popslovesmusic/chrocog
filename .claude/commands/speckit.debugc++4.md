Create unit tests for this C++ code:
1. Write test cases for normal operation
2. Add edge case tests (empty input, boundaries, max values)
3. Test error conditions and exceptions
4. Verify memory safety with valgrind/sanitizers
5. Use appropriate test framework (Google Test, Catch2)