Debug this C++ code for logic errors and crashes:
1. Identify null pointer dereferences and segfaults
2. Check for uninitialized variables
3. Verify loop conditions and off-by-one errors
4. Test edge cases and boundary conditions
5. Add defensive checks and error handling